<!DOCTYPE html>
<!-- Coding By Vyshantha Simha and A.P Adekanbi -->
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">  
    <title>Oduduwa Translation</title>
    <meta property="og:type"               content="article" />
    <meta property="og:title"              content="Oduduwa Translation" />
    <meta property="og:image"              content="https://oduduwatranslate.github.io/yoruba/favicon.ico" />
    <meta property="og:description"        content="Oduduwa Àébájìogbè Odùduwà Yorùbá Nigeria Benin" data-qmeta="keywords">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
  </head>
  <body>
    <div class="container">
      <div class="wrapper">
        <table class="tab">
          <tr>
            <td>
              <button class="tablinks" onclick="openTab(event, 'Yoruba')" id="defaultOpen"><img src="Yorubaland.jpg" alt="Yoruba" height="25px" width="25px" onclick="openTab(event, 'Yoruba')"></button>
            </td>
            <td>
              <button class="tablinks" onclick="openTab(event, 'Nigeria')"><img src="Flag_of_Nigeria.png" alt="Nigeria" height="25px" width="25px" onclick="openTab(event, 'Nigeria')"></button>
            </td>
            <td>
              <button class="tablinks" onclick="openTab(event, 'Benin')"><img src="Flag_of_Benin.png" alt="Benin" height="25px" width="25px" onclick="openTab(event, 'Benin')"></button>
            </td>
            <td class="textOduduwa">
              <span class="tablinks"></span>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ذشضثلاذشتضهخءضث خيضعيعصضش &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
          </tr>
        </table>
        <div class="text-input">
          <div id="Yoruba" class="tabcontent">
            <textarea spellcheck="false" id="textarea1" class="from-text" placeholder="Yorùbá(Latin) &#10; Kí l’orúkọ ẹ &#10; Kí l’orúkɔ ɛ" onkeyup="transliterate()"></textarea>
          </div>
          <div id="Nigeria" class="tabcontent">
            <textarea spellcheck="false" id="textarea1" class="from-text" placeholder="Yorùbá(Latin) Nigeria &#10; Kí l’orúkọ ẹ" onkeyup="transliterate()"></textarea>
          </div>
          <div id="Benin" class="tabcontent">
            <textarea spellcheck="false" id="textarea1" class="from-text" placeholder="Yorùbá(Latin) Benin &#10; Kí l’orúkɔ ɛ" onkeyup="transliterate()"></textarea>
          </div>
          <div>
            <textarea spellcheck="false" id="textarea2" readonly class="to-text" placeholder="نضه مكخقضعنر ؤ" onkeyup="transliterate()"></textarea>
          </div>
        </div>
        <ul class="controls">
          <li class="row from">
            <div class="icons tooltip" onmousedown="show1()">
              <i id="from" class="fas fa-copy" onclick="copyContent1()"></i>
              <div id="tooltip1" onmouseout="hide()" class="tooltiptext">
                <span>Yorùbá(Latin) Text Copied</span>
              </div>
            </div>
          </li>
          <li class="exchange">
            <i class="fas fa-exchange-alt" onclick="swapTransliteration()"></i>
          </li>
          <li class="row to">
            <div class="icons tooltip" onmousedown="show2()">
              <i id="to" class="fas fa-copy" onclick="copyContent2()"></i>
              <div id="tooltip2" onmouseout="hide()" class="tooltiptext">
                <span class="textOduduwa">ذشضثلاذشتضهخءضث خيضعيعصضش يشنر رقر</span>
              </div>
            </div>
          </li>
        </ul>
      </div>
      <button onclick="transliterate()"><span>Tumọ</span> | <span class="textOduduwa">فعةر</span></button>
    </div>
    <script>
      function hide() {
        document.getElementById("tooltip1").classList.remove("block");
        document.getElementById("tooltip2").classList.remove("block");
      }
      function show1() {
        document.getElementById("tooltip1").classList.add("block");
        var self = this;
        setTimeout(function() {
          self.hide();
        },3000);
      }
      function show2() {
        document.getElementById("tooltip2").classList.add("block");
        var self = this;
        setTimeout(function() {
          self.hide();
        },3000);
      }
      
      function swapTransliteration() {
        if (localStorage.getItem("direction") == null || localStorage.getItem("direction") == undefined ||  localStorage.getItem("direction") == "latin2oduduwa") {
          localStorage.setItem("direction", "oduduwa2latin");
          document.getElementById("textarea1").readOnly = true; 
          document.getElementById('textarea2').removeAttribute('readonly');
          document.getElementById("textarea2").focus();
          //document.getElementById("swapTooltip").value = "ذشضثلاذشتضهخءضث خيضعيعصضش -> Yorùbá(Latin)";
        } else if (localStorage.getItem("direction") == "oduduwa2latin") {
          localStorage.setItem("direction", "latin2oduduwa");
          document.getElementById('textarea1').removeAttribute('readonly');
          document.getElementById("textarea2").readOnly = true;
          document.getElementById("textarea1").focus();
          //document.getElementById("swapTooltip").value = "Yorùbá(Latin) -> ذشضثلاذشتضهخءضث خيضعيعصضش";
        }
      }

      function copyContent1() {
        navigator.clipboard.writeText(document.getElementById("textarea1").value)
      }

      function copyContent2() {
        navigator.clipboard.writeText(document.getElementById("textarea2").value)
      }

      function transliterate() {
        if (localStorage.getItem("direction") == null || localStorage.getItem("direction") == undefined || localStorage.getItem("direction") == "latin2oduduwa") {
          const yorubaToArabic = {"`":"ذ","q":"ض","w":"ص","e":"ث","r":"ق","t":"ف","y":"غ","u":"ع","i":"ه","o":"خ","p":"ح","a":"ش","s":"س","d":"ي","f":"ب","gb":"ء","g":"ل","h":"ا","j":"ت","k":"ن","l":"م","'":"ك","’":"ك",";":"ط","\\":"\\","\"":"'","z":"ئ","sh":"ئ","ṣ":"ئ","x":"ء","ɛ":"ؤ","ẹ":"ؤ","c":"ؤ","ɔ":"ر","ọ":"ر","v":"ر","b":"لا","n":"ى","m":"ة","Q":"ض","W":"ص","E":"ث","R":"ق","T":"ف","Y":"غ","U":"ع","I":"ه","O":"خ","P":"ح","A":"ش","S":"س","D":"ي","F":"ب","GB":"ء","Gb":"ء","G":"ل","H":"ا","J":"ت","K":"ن","L":"م","Z":"ئ","Sh":"ئ","Ṣ":"ئ","X":"ء","Ɛ":"ؤ","Ẹ":"ؤ","C":"ؤ","Ɔ":"ر","Ọ":"ر","V":"ر","B":"لا","N":"ى","M":"ة",",":"و",".":"ز","/":"ظ","<":",",">":".","?":"؟",":":":","1":"١","2":"٢","3":"٣","4":"٤","5":"٥","6":"٦","7":"٧","8":"٨","9":"٩","0":"٠"," ":" ","-":"-","á":"ضش","Á":"ضش","à":"ذش","À":"ذش","é":"ضث","É":"ضث","è":"ذث","È":"ذث","ẹ́":"ضؤ","Ẹ́":"ضؤ","ẹ̀":"ذؤ","Ẹ̀":"ذؤ","í":"ضه","Í":"ضه","ì":"ذه","Ì":"ذه","ń":"ضى","Ń":"ضى","ǹ":"ذى","Ǹ":"ذى","ḿ":"ضة","Ḿ":"ضة","m̀":"ذة","M̀":"ذة","ó":"ضخ","Ó":"ضخ","ò":"ذخ","Ò":"ذخ","ọ́":"ضر","Ọ́":"ضر","ọ̀":"ذر","Ọ̀":"ذر","ú":"ضع","Ú":"ضع","ù":"ذع","Ù":"ذع","=":"=","+":"+","-":"-","÷":"÷","×":"×","(":"(",")":")"};
          const middleTone = {"ā":"a","Ā":"a","ē":"e","Ē":"e","ẹ̄":"ẹ","Ẹ̄":"ẹ","ī":"i","Ī":"ī","n̄":"n","N̄":"n","N̄":"n","m̄":"m","M̄":"m","ō":"o","Ō":"o","ọ̄":"ọ","Ọ̄":"ọ","ū":"u","Ū":"u"};

          let textYo = document.getElementById("textarea1").value;
          let resultAr = "";
          for (let u = 0; u < textYo.length; u++ ) {
            // Middle Tone convert to normal character
            if (textYo[u].indexOf(middleTone) > -1) 
              textYo[u] = middleTone[textYo[u]];
            if (textYo[u].toLowerCase().indexOf("b") > -1 && textYo[(u-1)] && textYo[(u-1)].toLowerCase() == "g")
              resultAr = resultAr.slice(0, -1) + yorubaToArabic["gb"];
            else if (textYo[u].toLowerCase().indexOf("h") > -1 && textYo[(u-1)] && textYo[(u-1)].toLowerCase() == "s")
              resultAr = resultAr.slice(0, -1) + yorubaToArabic["sh"];
            else if (textYo[(u+1)] && (textYo[(u+1)].indexOf("`") > -1 || textYo[(u+1)].indexOf("̀") > -1))
              resultAr = resultAr + yorubaToArabic["`"] + yorubaToArabic[textYo[u]];
            else if (textYo[u].indexOf("◌̀") > -1)
              resultAr = resultAr + yorubaToArabic["`"] + yorubaToArabic[textYo[u]];
            else if (textYo[u].indexOf("◌́") > -1)
              resultAr = resultAr + yorubaToArabic["q"] + yorubaToArabic[textYo[u]];
            else if (textYo[(u+1)] && (textYo[(u+1)].indexOf("´") > -1 || textYo[(u+1)].indexOf("́") > -1))
              resultAr = resultAr + yorubaToArabic["q"] + yorubaToArabic[textYo[u]];
            else if (textYo[(u)].indexOf("\n") > -1)
              resultAr = resultAr + "\n";
            else if (textYo[u].indexOf("̄") > -1)
              resultAr = resultAr;
            else if (yorubaToArabic[textYo[u]] != undefined && yorubaToArabic[textYo[u]] != null && textYo[u] != "")
              resultAr = resultAr + yorubaToArabic[textYo[u]];
          }

          document.getElementById("textarea2").value = resultAr;
          document.getElementById("textarea2").innerHTML = resultAr;

        } else if (localStorage.getItem("direction") == "oduduwa2latin") {
          const diacritics = {
            a: ["à", "á", "ā"],
            e: ["è", "é", "ē"],
            ẹ: ["ẹ̀", "ẹ́", "ẹ̄"],
            i: ["ì", "í", "ī"],
            m: ["m̀", "ḿ", "m̄"],
            n: ["ǹ", "ń", "n̄"],
            o: ["ò", "ó", "ō"],
            ọ: ["ọ̀", "ọ́", "ọ̄"],
            u: ["ù", "ú", "ū"]
          };
          const arabicToYoruba = {"٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","ذ":"◌̀","ض":"◌́","ص":"w","ث":"e","ق":"r","ف":"t","غ":"y","ع":"u","ه":"i","خ":"o","ح":"p","ش":"a","س":"s","ي":"d","ب":"f","ل":"g","ا":"h","ت":"j","ن":"k","م":"l","ك":"'","ط":";","'":"\"","ئ":"ṣ","ء":"gb","ؤ":"ẹ","ر":"ọ","لا":"b","ى":"n","ة":"m","و":",","ز":".","ظ":"/",",":"<",".":">","؟":"?",":":":"," ":" ","=":"=","+":"+","-":"-","÷":"÷","×":"×","(":"(",")":")"};

          let resultYo = "";
          let textAr = document.getElementById("textarea2").value;
          for (let u = 0; u < textAr.length; u++ ) {
            if (textAr[u] && (textAr[u].indexOf("ذ") > -1 || (textAr[(u+1)] && textAr[(u+1)].indexOf("̀") > -1)))
              resultYo = resultYo + arabicToYoruba[textAr[u]];
            else if (textAr[u] && textAr[u].indexOf("ذ") > -1)
              resultYo = resultYo + arabicToYoruba["◌̀"] + arabicToYoruba[textAr[u]];
            else if (textAr[u] && (textAr[u].indexOf("ض") > -1 || (textAr[(u+1)] && textAr[(u+1)].indexOf("́") > -1)))
              resultYo = resultYo + arabicToYoruba[textAr[u]];
            else if (textAr[u] && textAr[u].indexOf("ض") > -1)
              resultYo = resultYo + arabicToYoruba["◌́"] + arabicToYoruba[textAr[u]];
            else if (textAr[u].indexOf("\n") > -1)
              resultYo = resultYo + "\n";
            else if (diacritics[arabicToYoruba[textAr[u]]] && textAr[(u-1)] && textAr[(u-1)] == "ذ")
              resultYo = resultYo.slice(0, -1).slice(0, -1) + diacritics[arabicToYoruba[textAr[u]]][0];
            else if (diacritics[arabicToYoruba[textAr[u]]] && textAr[(u-1)] && textAr[(u-1)] == "ض")
              resultYo = resultYo.slice(0, -1).slice(0, -1) + diacritics[arabicToYoruba[textAr[u]]][1];
            else if (arabicToYoruba[textAr[u]] != undefined && arabicToYoruba[textAr[u]] != null && textAr[u] != "")
              resultYo = resultYo + arabicToYoruba[textAr[u]];
          }
          document.getElementById("textarea1").value = resultYo;
          document.getElementById("textarea1").innerHTML = resultYo;
        }        
      }

      function swap(json){
        var ret = {};
        for(var key in json){
            ret[json[key]] = key;
        }
        return ret;
      }

      function openTab(evt, localeName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
          tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(localeName).style.display = "block";
        evt.currentTarget.className += " active";
      }

      // Get the element with id="defaultOpen" and click on it
      document.getElementById("defaultOpen").click();
      document.getElementById("textarea1").focus();
      if (localStorage.getItem("direction") == null || localStorage.getItem("direction") == undefined || localStorage.getItem("direction") == "oduduwa2latin") {
        localStorage.setItem("direction", "latin2oduduwa");
      }
    </script>
  </body>
</html>
